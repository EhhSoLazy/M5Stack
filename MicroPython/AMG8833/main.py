from m5stack import *
from m5ui import *
from uiflow import *
import machine, utime, amg88xx,  math, i2c_bus
setScreenColor(0x222222)
p1 = M5TextBox(0, 0, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p2 = M5TextBox(40, 0, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p3 = M5TextBox(80, 0, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p4 = M5TextBox(120, 0, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p5 = M5TextBox(160, 0, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p6 = M5TextBox(200, 1, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p7 = M5TextBox(240, 0, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p8 = M5TextBox(280, 0, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p9 = M5TextBox(0, 30, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p10 = M5TextBox(40, 30, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p11 = M5TextBox(80, 30, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p12 = M5TextBox(120, 30, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p13 = M5TextBox(160, 30, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p14 = M5TextBox(200, 30, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p15 = M5TextBox(240, 30, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p16 = M5TextBox(280, 30, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p17 = M5TextBox(0, 60, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p18 = M5TextBox(40, 60, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p19 = M5TextBox(80, 60, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p20 = M5TextBox(120, 60, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p21 = M5TextBox(160, 60, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p22 = M5TextBox(200, 60, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p23 = M5TextBox(240, 60, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p24 = M5TextBox(280, 60, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p25 = M5TextBox(0, 90, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p26 = M5TextBox(40, 90, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p27 = M5TextBox(80, 90, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p28 = M5TextBox(120, 90, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p29 = M5TextBox(160, 90, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p30 = M5TextBox(200, 90, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p31 = M5TextBox(240, 90, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p32 = M5TextBox(280, 90, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p33 = M5TextBox(0, 120, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p34 = M5TextBox(40, 120, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p35 = M5TextBox(80, 120, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p36 = M5TextBox(120, 120, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p37 = M5TextBox(160, 120, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p38 = M5TextBox(200, 120, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p39 = M5TextBox(240, 120, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p40 = M5TextBox(280, 120, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p41 = M5TextBox(0, 150, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p42 = M5TextBox(40, 150, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p43 = M5TextBox(80, 150, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p44 = M5TextBox(120, 150, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p45 = M5TextBox(160, 150, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p46 = M5TextBox(200, 150, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p47 = M5TextBox(240, 150, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p48 = M5TextBox(280, 150, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p49 = M5TextBox(0, 180, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p50 = M5TextBox(40, 180, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p51 = M5TextBox(80, 180, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p52 = M5TextBox(120, 180, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p53 = M5TextBox(160, 180, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p54 = M5TextBox(200, 180, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p55 = M5TextBox(240, 180, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p56 = M5TextBox(280, 180, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p57 = M5TextBox(0, 210, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p58 = M5TextBox(40, 210, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p59 = M5TextBox(80, 210, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p60 = M5TextBox(120, 210, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p61 = M5TextBox(160, 210, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p62 = M5TextBox(200, 210, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p63 = M5TextBox(240, 210, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
p64 = M5TextBox(280, 210, "Text", lcd.FONT_Default,0xFFFFFF, rotate=0)
pixel = None
pixel_val = None
pixels = None

while True:
  sensor=amg88xx.AMG8833()
  pixels = sensor.read_temp()
  set_text = lambda index, pixel: eval("p{pixel}.setText(str({pixel_val}))".format(pixel=index,pixel_val=int(round(pixel))))
  [set_text(ind, x) for ind, x in enumerate(pixels) if ind > 0 and ind < 64]
  wait_ms(1)
